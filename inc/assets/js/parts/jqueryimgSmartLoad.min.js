!function(a,b){function c(b,c){this.element=b,this.options=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}var d="imgSmartLoad",e={load_all_images_on_first_scroll:!1,attribute:"data-src",threshold:200,fadeIn_options:{duration:400},delaySmartLoadEvent:0};c.prototype.init=function(){var c=this,d=a("img["+this.options.attribute+"]",this.element);this.increment=1,this.timer=0,d.bind("load_img",{},function(){c._load_img(this)}),a(b).scroll(function(a){c._better_scroll_event_handler(d,a)}),a(b).resize(function(a){c._maybe_trigger_load(d,a)}),this._maybe_trigger_load(d)},c.prototype._better_scroll_event_handler=function(a,c){var d=this;0!==this.timer&&(this.increment++,b.clearTimeout(this.timer)),this.timer=b.setTimeout(function(){d._maybe_trigger_load(a,c)},d.increment>5?50:0)},c.prototype._maybe_trigger_load=function(b,c){var d=this;_visible_list=b.filter(function(a,b){return d._is_visible(b,c)}),_visible_list.map(function(b,c){a(c).trigger("load_img")})},c.prototype._is_visible=function(c,d){var e=a(c),f=a(b).scrollTop(),g=f+a(b).height(),h=e.offset().top,i=h+e.height(),j=this.options.threshold;return d&&"scroll"==d.type&&this.options.load_all_images_on_first_scroll?!0:i>=f-j&&g+j>=h},c.prototype._load_img=function(b){var c=a(b),d=c.attr(this.options.attribute),e=this;c.parent().addClass("smart-loading"),c.unbind("load_img").hide().removeAttr(this.options.attribute).attr("src",d).load(function(){c.fadeIn(e.options.fadeIn_options).css("display","inline-block").trigger("smartload")}),c[0].complete&&c.load(),c.parent().removeClass("smart-loading")},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);